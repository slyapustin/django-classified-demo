
spec:
  name: django-classified-demo
  services:
    - name: web
      github:
        repo: slyapustin/django-classified-demo
        branch: do-deployment
      build_command: pip install -r requirements.txt
      run_command: |
        python manage.py migrate --no-input &&
        python ./manage.py collectstatic --no-input &&
        python ./manage.py setup_project &&
        python manage.py runserver 0.0.0.0:8080
      environment_slug: python
      instance_size_slug: basic-xxs
      http_port: 8080
      envs:
        - key: SECRET_KEY
          value: "change-me"
          type: SECRET
        - key: DATABASE_URL
          scope: RUN_TIME
          value: '${db.DATABASE_URL}'
  databases:
    - name: db
      engine: PG # Uses PostgreSQL
      version: "16"
      cluster_name: django-classified-db
      size: db-s-1vcpu-1gb
